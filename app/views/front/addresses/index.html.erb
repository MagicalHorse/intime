<%= content_for :head_nav do %>
  <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".aside"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
  <ul class="nav">
    <li><a href="javascript:history.go(-1);"><i class="icon-undo"></i></a></li>
    <li class="title">收货地址管理</li>
  </ul>
<% end %>
<div class="span9 main">
  <div class="Logistics_query olrtds address">
    <h5 style="line-height:30px;">常用地址（您还可以添加 <%= API::Address::MAX_SIZE - @addresses[:datas].size %> 个地址）<a href="#add01" data-toggle="modal" class="add btn btn-danger">添加新地址</a></h5>
    <div id="add01" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="barcode" aria-hidden="false">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="mLabel">添加新地址</h3>
      </div>
      <div class="modal-body">
        <div class="item_tit thzq"><span>收货人：</span>
          <input id="u1" type="text" placeholder="收货人姓名">
          <br>
          <span>省份：</span>
          <select name="address[shippingprovinceid]" data-name="province_id" data-value="">
            <option>请选择省份</option>
          </select>
          <br>
          <span>城市：</span>
          <select name="address[shippingcityid]" data-name="city_id" data-value="">
            <option>请选择城市</option>
          </select>
          <br>
          <span>地区：</span>
          <select name="address[shippingdistrictid]" data-name="district_id" data-value="">
            <option>请选择地区</option>
          </select>
          <br>
          <span>收货地址：</span>
          <input id="u1" type="text" placeholder="收货人地址">
          <br>
          <span>邮编：</span>
          <input id="u6" type="text" placeholder="邮政编码">
          <br>
          <span>手机号码：</span>
          <input id="u2" type="text" placeholder="有效手机号码">
          <br>
        </div>
      </div>
      <div class="modal-footer">
        <a class="btn btn-danger" data-dismiss="modal">确定</a>
        <a class="btn btn-danger" data-dismiss="modal">取消</a>
      </div>
    </div>

    <% if @addresses[:datas].blank? %>
      <p style="text-align: center;">您还没有创建收货地址</p>
    <% else %>
      <% @addresses[:datas].each do |address| %>
        <%= form_for :address, url: front_address_path(address[:id]), method: :put do |f| %>
          <div class="item">
            <a href="javascript:;">
              <div class="item_tit thzq lh25" >
                <span>收货人：</span><%= address['shippingperson'] %><br>
                <span>手机号码：</span><%= address['shippingphone'] %><br>
                <span>收货地址：</span><%= address['shippingaddress'] %><br>
                <span>邮编：</span><%= address['shippingzipcode'] %><br>
                <span class="it"></span>
              </div>
            </a>
          </div>
          <p style="text-align:center;"> <a href="#alter01" data-toggle="modal" class="btn">修改</a> <a href="#delete01" data-toggle="modal" class="btn ">删除</a>
            <div id="alter01" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="barcode" aria-hidden="false">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="mLabel">修改当前地址</h3>
              </div>
              <div class="modal-body">
                <div class="item_tit thzq"><span>收货人：</span>
                  <%= f.text_field :shippingperson, value: address[:shippingperson] %>
                  <br>
                  <span>省份：</span>
                  <select name="address[shippingprovinceid]" data-name="province_id" data-value="<%= address[:shippingprovinceid] %>">
                  </select>
                  <br>
                  <span>城市：</span>
                  <select name="address[shippingcityid]" data-name="city_id" data-value="<%= address[:shippingcityid] %>">
                  </select>
                  <br>
                  <span>地区：</span>
                  <select name="address[shippingdistrictid]" data-name="district_id" data-value="<%= address[:shippingdistrictid] %>">
                  </select>
                  <br>
                  <span>收货地址：</span>
                  <%= f.text_field :shippingaddress, value: address[:shippingaddress] %>
                  <br>
                  <span>邮编：</span>
                  <%= f.text_field :shippingzipcode, value: address[:shippingzipcode] %>
                  <br>
                  <span>手机号码：</span>
                  <%= f.text_field :shippingphone, value: address[:shippingphone] %>
                  <br>
                </div>
              </div>
              <div class="modal-footer">
                <a class="btn btn-danger" data-dismiss="modal">保存</a>
                <a class="btn btn-danger" data-dismiss="modal">取消</a>
              </div>
            </div>

            <div id="delete01" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="barcode" aria-hidden="false">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="mLabel">删除地址</h3>
              </div>
              <div class="modal-body">
                <p>是否确定要删除地址？</p>
              </div>
              <div class="modal-footer">
                <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">确认</button>
              </div>
            </div>
          </p>
        <% end %>
      <% end %>
    <% end %>
    <p class="adds"><a href="#add01" data-toggle="modal" class="btn btn-danger">添加新地址</a> </p>
  </div>
</div>
<%= content_for :javascripts do %>
  <script src="<%= static_url('/js/addresses.js') %>"></script>
<% end %>
