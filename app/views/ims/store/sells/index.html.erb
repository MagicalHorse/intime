礼品卡

<% @gift_cards.each do |card| %>
<%= image_tag "/image/1.jpg" %><br/>

<%= card["desc"] %>

<%= link_to card["is_online"] ? "下架" : "上架", "javascript:void(0);", class: "card" %>
<% end %>



商品搭配

<% @combos.each do |combo| %>
  <%= image_tag "/images/1.jpg" %>
  <%= link_to combo["desc"], new_ims_store_combo_path(combo["id"]) %>
  <!-- 这里要改为编辑 -->
  组合价: ￥<%= combo["price"] %>
  <%= link_to combo["is_online"] ? "下架" : "上架", "javascript:void(0);", class: "combo", value: combo["id"] %>
<% end %>

<%= link_to '添加搭配商品', new_ims_store_combo_path %>

<% content_for :javascripts do %>
<script>
  $(function(){

    $(document).on("click", ".combo", function(){
      this_ele = $(this)
      store_id = "store_id"
      combo_id = this_ele.attr("value")
      text = this_ele.text()
      if(text == "上架"){
        $.post("", {store_id: store_id, combo_id: combo_id}, function(data){
          if(true){
            this_ele.text("下架")
          }else{
            alert(text+"失败")
          }
        })
      }else if(text == "下架"){
        $.post("", {_method: "delete", combo_id: combo_id}, function(data){
          if(true){
            this_ele.text("上架")
          }else{
            alert(text+"失败")
          }

        })
      }
    })

    $(document).on("click", ".card", function(){
      this_ele = $(this)
      store_id = "store_id"
      text = this_ele.text()
      if(text == "上架"){
        $.post("", {store_id: store_id}, function(data){
          if(true){
            this_ele.text("下架")
          }else{
            alert(text+"失败")
          }
        })
      }else if(text == "下架"){
        $.post("", {_method: "delete"}, function(data){
          if(true){
            this_ele.text("上架")
          }else{
            alert(text+"失败")
          }

        })
      }
    })
  })
</script>
<% end %>


